{"version":3,"file":"ruler.min.js","sources":["../../react-ruler/dist/ruler.esm.js","../src/index.umd.ts","../src/consts.ts","../src/InnerRuler.tsx","../src/Ruler.tsx"],"sourcesContent":["/*\nCopyright (c) 2019 Daybrush\nname: @scena/react-ruler\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/ruler/blob/master/packages/react-ruler\nversion: 0.10.0\n*/\nimport { version, createElement, PureComponent } from 'react';\nimport { ref } from 'framework-utils';\nimport { convertUnitSize } from '@daybrush/utils';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar Ruler =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(Ruler, _super);\n\n  function Ruler() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      scrollPos: 0\n    };\n    _this.width = 0;\n    _this.height = 0;\n    _this._zoom = 0;\n    return _this;\n  }\n\n  var __proto = Ruler.prototype;\n\n  __proto.render = function () {\n    var props = this.props;\n    var portalContainer = props.portalContainer;\n    var portalAttributes = {};\n\n    if ((version || \"\").indexOf(\"simple\") > -1 && portalContainer) {\n      portalAttributes = {\n        portalContainer: portalContainer\n      };\n    }\n\n    this._zoom = props.zoom;\n    return createElement(\"canvas\", __assign({\n      ref: ref(this, \"canvasElement\")\n    }, portalAttributes, {\n      style: this.props.style\n    }));\n  };\n\n  __proto.componentDidMount = function () {\n    var canvas = this.canvasElement;\n    var context = canvas.getContext(\"2d\");\n    this.canvasContext = context;\n    this.resize();\n  };\n\n  __proto.componentDidUpdate = function () {\n    this.resize();\n  };\n  /**\n   * @method Ruler#scroll\n   * @param scrollPos\n   */\n\n\n  __proto.scroll = function (scrollPos, nextZoom) {\n    this.draw(scrollPos, nextZoom);\n  };\n  /**\n   * @method Ruler#resize\n   */\n\n\n  __proto.resize = function (nextZoom) {\n    var canvas = this.canvasElement;\n    var _a = this.props,\n        width = _a.width,\n        height = _a.height,\n        scrollPos = _a.scrollPos;\n    this.width = width || canvas.offsetWidth;\n    this.height = height || canvas.offsetHeight;\n    canvas.width = this.width * 2;\n    canvas.height = this.height * 2;\n    this.draw(scrollPos, nextZoom);\n  };\n\n  __proto.draw = function (scrollPos, nextZoom) {\n    if (scrollPos === void 0) {\n      scrollPos = this.state.scrollPos;\n    }\n\n    if (nextZoom === void 0) {\n      nextZoom = this._zoom;\n    }\n\n    this._zoom = nextZoom;\n    var props = this.props;\n    var _a = props,\n        unit = _a.unit,\n        type = _a.type,\n        backgroundColor = _a.backgroundColor,\n        lineColor = _a.lineColor,\n        textColor = _a.textColor,\n        textBackgroundColor = _a.textBackgroundColor,\n        direction = _a.direction,\n        _b = _a.negativeRuler,\n        negativeRuler = _b === void 0 ? true : _b,\n        _c = _a.segment,\n        segment = _c === void 0 ? 10 : _c,\n        textFormat = _a.textFormat,\n        _d = _a.range,\n        range = _d === void 0 ? [-Infinity, Infinity] : _d,\n        rangeBackgroundColor = _a.rangeBackgroundColor;\n    var width = this.width;\n    var height = this.height;\n    var state = this.state;\n    state.scrollPos = scrollPos;\n    var context = this.canvasContext;\n    var isHorizontal = type === \"horizontal\";\n    var isNegative = negativeRuler !== false;\n    var font = props.font || \"10px sans-serif\";\n    var textAlign = props.textAlign || \"left\";\n    var textOffset = props.textOffset || [0, 0];\n    var containerSize = isHorizontal ? height : width;\n    var mainLineSize = convertUnitSize(\"\".concat(props.mainLineSize || \"100%\"), containerSize);\n    var longLineSize = convertUnitSize(\"\".concat(props.longLineSize || 10), containerSize);\n    var shortLineSize = convertUnitSize(\"\".concat(props.shortLineSize || 7), containerSize);\n    var lineOffset = props.lineOffset || [0, 0];\n\n    if (backgroundColor === \"transparent\") {\n      // Clear existing paths & text\n      context.clearRect(0, 0, width * 2, height * 2);\n    } else {\n      // Draw the background\n      context.rect(0, 0, width * 2, height * 2);\n      context.fillStyle = backgroundColor;\n      context.fill();\n    }\n\n    context.save();\n    context.scale(2, 2);\n    context.strokeStyle = lineColor;\n    context.lineWidth = 1;\n    context.font = font;\n    context.fillStyle = textColor;\n\n    switch (direction) {\n      case \"start\":\n        context.textBaseline = \"top\";\n        break;\n\n      case \"center\":\n        context.textBaseline = \"middle\";\n        break;\n\n      case \"end\":\n        context.textBaseline = \"bottom\";\n        break;\n    }\n\n    context.translate(0.5, 0);\n    context.beginPath();\n    var size = isHorizontal ? width : height;\n    var zoomUnit = nextZoom * unit;\n    var minRange = Math.floor(scrollPos * nextZoom / zoomUnit);\n    var maxRange = Math.ceil((scrollPos * nextZoom + size) / zoomUnit);\n    var length = maxRange - minRange;\n    var alignOffset = Math.max([\"left\", \"center\", \"right\"].indexOf(textAlign) - 1, -1);\n    var barSize = isHorizontal ? height : width; // Draw Range Background\n\n    if (rangeBackgroundColor !== \"transparent\" && range[0] !== -Infinity && range[1] !== Infinity) {\n      var rangeStart = (range[0] - scrollPos) * nextZoom;\n      var rangeEnd = (range[1] - range[0]) * nextZoom;\n      context.save();\n      context.fillStyle = rangeBackgroundColor;\n\n      if (isHorizontal) {\n        context.fillRect(rangeStart, 0, rangeEnd, barSize);\n      } else {\n        context.fillRect(0, rangeStart, barSize, rangeEnd);\n      }\n\n      context.restore();\n    } // Render Segments First\n\n\n    for (var i = 0; i <= length; ++i) {\n      var value = i + minRange;\n\n      if (!isNegative && value < 0) {\n        continue;\n      }\n\n      var startValue = value * unit;\n      var startPos = (startValue - scrollPos) * nextZoom;\n\n      for (var j = 0; j < segment; ++j) {\n        var pos = startPos + j / segment * zoomUnit;\n        var value_1 = startValue + j / segment * unit;\n\n        if (pos < 0 || pos >= size || value_1 < range[0] || value_1 > range[1]) {\n          continue;\n        }\n\n        var lineSize = j === 0 ? mainLineSize : j % 2 === 0 ? longLineSize : shortLineSize;\n        var origin = 0;\n\n        switch (direction) {\n          case \"start\":\n            origin = 0;\n            break;\n\n          case \"center\":\n            origin = barSize / 2 - lineSize / 2;\n            break;\n\n          case \"end\":\n            origin = barSize - lineSize;\n            break;\n        }\n\n        var _e = isHorizontal ? [pos + lineOffset[0], origin + lineOffset[1]] : [origin + lineOffset[0], pos + lineOffset[1]],\n            x1 = _e[0],\n            y1 = _e[1];\n\n        var _f = isHorizontal ? [x1, y1 + lineSize] : [x1 + lineSize, y1],\n            x2 = _f[0],\n            y2 = _f[1];\n\n        context.moveTo(x1 + lineOffset[0], y1 + lineOffset[1]);\n        context.lineTo(x2 + lineOffset[0], y2 + lineOffset[1]);\n      }\n    }\n\n    context.stroke(); // Render Labels\n\n    for (var i = 0; i <= length; ++i) {\n      var value = i + minRange;\n\n      if (!isNegative && value < 0) {\n        continue;\n      }\n\n      var startValue = value * unit;\n      var startPos = (startValue - scrollPos) * nextZoom;\n\n      if (startPos < -zoomUnit || startPos >= size + unit * nextZoom || startValue < range[0] || startValue > range[1]) {\n        continue;\n      }\n\n      var origin = 0;\n\n      switch (direction) {\n        case \"start\":\n          origin = 17;\n          break;\n\n        case \"center\":\n          origin = barSize / 2;\n          break;\n\n        case \"end\":\n          origin = barSize - 17;\n          break;\n      }\n\n      var _g = isHorizontal ? [startPos + alignOffset * -3, origin] : [origin, startPos + alignOffset * 3],\n          startX = _g[0],\n          startY = _g[1];\n\n      var text = \"\".concat(startValue);\n\n      if (textFormat) {\n        text = textFormat(startValue);\n      }\n\n      context.textAlign = textAlign;\n      var backgroundOffset = 0;\n      var textSize = context.measureText(text).width;\n\n      switch (textAlign) {\n        case \"left\":\n          backgroundOffset = 0;\n          break;\n\n        case \"center\":\n          backgroundOffset = -textSize / 2;\n          break;\n\n        case \"right\":\n          backgroundOffset = -textSize;\n          break;\n      }\n\n      if (isHorizontal) {\n        context.save();\n        context.fillStyle = textBackgroundColor;\n        context.fillRect(startX + textOffset[0] + backgroundOffset, 0, textSize, mainLineSize);\n        context.restore();\n      } else {\n        context.save();\n        context.translate(0, startY + textOffset[1]);\n        context.rotate(-Math.PI / 2);\n        context.fillStyle = textBackgroundColor;\n        context.fillRect(backgroundOffset, 0, textSize, mainLineSize);\n        context.restore();\n      }\n\n      if (isHorizontal) {\n        context.fillText(text, startX + textOffset[0], startY + textOffset[1]);\n      } else {\n        context.save();\n        context.translate(startX + textOffset[0], startY + textOffset[1]);\n        context.rotate(-Math.PI / 2);\n        context.fillText(text, 0, 0);\n        context.restore();\n      }\n    }\n\n    context.restore();\n  };\n\n  Ruler.defaultProps = {\n    type: \"horizontal\",\n    zoom: 1,\n    width: 0,\n    height: 0,\n    unit: 50,\n    negativeRuler: true,\n    mainLineSize: \"100%\",\n    longLineSize: 10,\n    shortLineSize: 7,\n    segment: 10,\n    direction: \"end\",\n    style: {\n      width: \"100%\",\n      height: \"100%\"\n    },\n    backgroundColor: \"#333333\",\n    font: \"10px sans-serif\",\n    textColor: \"#ffffff\",\n    textBackgroundColor: 'transparent',\n    lineColor: \"#777777\",\n    range: [-Infinity, Infinity],\n    rangeBackgroundColor: 'transparent'\n  };\n  return Ruler;\n}(PureComponent);\n\nvar PROPERTIES = [\"type\", \"width\", \"height\", \"unit\", \"zoom\", \"direction\", \"textAlign\", \"font\", \"segment\", \"mainLineSize\", \"longLineSize\", \"shortLineSize\", \"lineOffset\", \"textOffset\", \"negativeRuler\", \"range\", \"scrollPos\", \"style\", \"backgroundColor\", \"rangeBackgroundColor\", \"lineColor\", \"textColor\", \"textBackgroundColor\", \"textFormat\", \"portalContainer\"];\nvar METHODS = [\"scroll\", \"resize\"];\n\nexport default Ruler;\nexport { METHODS, PROPERTIES };\n//# sourceMappingURL=ruler.esm.js.map\n","import Ruler, * as others from \"./index.esm\";\n\nfor (const name in others) {\n    (Ruler as any)[name] = others[name];\n}\n\nexport default Ruler;\n","import { RulerProps, RulerInterface } from \"@scena/react-ruler/declaration/types\";\nimport {\n    PROPERTIES as RULER_PROPERTIES,\n    METHODS as RULER_METHODS,\n} from \"@scena/react-ruler\";\n\nexport const PROPERTIES: Array<keyof RulerProps> = RULER_PROPERTIES;\nexport const METHODS: Array<keyof RulerInterface> = RULER_METHODS;\n","import * as React from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { ref } from \"framework-utils\";\nimport ReactRuler from \"@scena/react-ruler\";\nimport { InnerRulerProps } from \"./types\";\n\nexport default class InnerRuler extends React.Component<InnerRulerProps, InnerRulerProps> {\n    public state: InnerRulerProps = {};\n    public ruler: ReactRuler;\n    constructor(props: InnerRulerProps) {\n        super(props);\n        this.state = this.props;\n    }\n    public render() {\n        const { parentElement, ...state } = this.state;\n\n        return createPortal(<ReactRuler ref={ref(this, \"ruler\")} {...state} />, parentElement);\n    }\n}\n","import { ref, Properties } from \"framework-utils\";\nimport * as React from \"react\";\nimport { render } from \"react-dom\";\nimport { PROPERTIES } from \"./consts\";\nimport { RulerInterface, RulerProps } from \"@scena/react-ruler/declaration/types\";\nimport InnerRuler from \"./InnerRuler\";\n\n\n/**\n * A Ruler component that can draw grids and scroll infinitely.\n * @sort 1\n * @implements Ruler.RulerInterface\n */\n@Properties(PROPERTIES, (prototype, property) => {\n    Object.defineProperty(prototype, property, {\n        get() {\n            return this.getRuler().props[property];\n        },\n        set(value) {\n            this.innerRuler.setState({\n                [property]: value,\n            });\n        },\n        enumerable: true,\n        configurable: true,\n    });\n})\nclass Ruler implements RulerInterface {\n    private tempElement = document.createElement(\"div\");\n    private innerRuler!: InnerRuler;\n    /**\n     * @param - container\n     * @param {$ts:Partial<Ruler.RulerProps>} options - options\n     */\n    constructor(parentElement: HTMLElement, options: Partial<RulerProps> = {}) {\n        render(\n            <InnerRuler ref={ref(this, \"innerRuler\")}\n                {...options} parentElement={parentElement} />,\n            this.tempElement,\n        );\n    }\n    public scroll(scrollPos: number) {\n        this.getRuler().scroll(scrollPos);\n    }\n    public resize() {\n        this.getRuler().resize();\n    }\n    /**\n     * Remove Ruler\n     */\n    public destroy() {\n        render(null, this.tempElement);\n        this.tempElement = null;\n        this.innerRuler = null;\n    }\n    private getRuler() {\n        return this.innerRuler.ruler;\n    }\n}\n\nexport default Ruler;\n"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","name","__assign","assign","t","s","i","n","arguments","length","apply","this","Ruler","_super","__extends","TypeError","String","__","constructor","_this","state","scrollPos","width","height","_zoom","create","__proto","render","props","portalContainer","portalAttributes","indexOf","zoom","createElement","ref","style","componentDidMount","context","canvasElement","getContext","canvasContext","resize","componentDidUpdate","scroll","nextZoom","draw","canvas","_a","offsetWidth","offsetHeight","unit","type","backgroundColor","lineColor","textColor","textBackgroundColor","direction","_b","negativeRuler","_c","segment","textFormat","_d","range","Infinity","rangeBackgroundColor","isHorizontal","isNegative","font","textAlign","textOffset","containerSize","mainLineSize","convertUnitSize","concat","longLineSize","shortLineSize","lineOffset","clearRect","rect","fillStyle","fill","save","scale","strokeStyle","lineWidth","textBaseline","translate","beginPath","size","zoomUnit","minRange","Math","floor","ceil","alignOffset","max","barSize","rangeStart","rangeEnd","fillRect","restore","value","startPos","startValue","j","pos","value_1","lineSize","origin","_e","x1","y1","_f","x2","y2","moveTo","lineTo","stroke","_g","startX","startY","text","backgroundOffset","textSize","measureText","rotate","PI","fillText","defaultProps","PureComponent","PROPERTIES","METHODS","parentElement","React","ReactRuler","options","document","InnerRuler","tempElement","getRuler","innerRuler","ruler","property","defineProperty","get","set","setState","enumerable","configurable","others"],"mappings":"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"}