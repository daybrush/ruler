{"version":3,"file":"ruler.js","sources":["../../react-ruler/dist/ruler.esm.js","../src/consts.ts","../src/InnerRuler.tsx","../src/Ruler.tsx","../src/index.umd.ts"],"sourcesContent":["/*\nCopyright (c) 2019 Daybrush\nname: @scena/react-ruler\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/ruler/blob/master/packages/react-ruler\nversion: 0.12.2\n*/\nimport { version, createElement, PureComponent } from 'react';\nimport { ref } from 'framework-utils';\nimport { convertUnitSize } from '@daybrush/utils';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar Ruler =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(Ruler, _super);\n\n  function Ruler() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      scrollPos: 0\n    };\n    _this.width = 0;\n    _this.height = 0;\n    _this._zoom = 0;\n    return _this;\n  }\n\n  var __proto = Ruler.prototype;\n\n  __proto.render = function () {\n    var props = this.props;\n    var portalContainer = props.portalContainer;\n    var portalAttributes = {};\n\n    if ((version || \"\").indexOf(\"simple\") > -1 && portalContainer) {\n      portalAttributes = {\n        portalContainer: portalContainer\n      };\n    }\n\n    this._zoom = props.zoom;\n    return createElement(\"canvas\", __assign({\n      ref: ref(this, \"canvasElement\")\n    }, portalAttributes, {\n      style: this.props.style\n    }));\n  };\n\n  __proto.componentDidMount = function () {\n    var canvas = this.canvasElement;\n    var context = canvas.getContext(\"2d\");\n    this.canvasContext = context;\n    this.resize();\n  };\n\n  __proto.componentDidUpdate = function () {\n    this.resize();\n  };\n  /**\n   * @method Ruler#scroll\n   * @param scrollPos\n   */\n\n\n  __proto.scroll = function (scrollPos, nextZoom) {\n    this.draw(scrollPos, nextZoom);\n  };\n  /**\n   * @method Ruler#resize\n   */\n\n\n  __proto.resize = function (nextZoom) {\n    var canvas = this.canvasElement;\n    var _a = this.props,\n        width = _a.width,\n        height = _a.height,\n        scrollPos = _a.scrollPos;\n    this.width = width || canvas.offsetWidth;\n    this.height = height || canvas.offsetHeight;\n    canvas.width = this.width * 2;\n    canvas.height = this.height * 2;\n    this.draw(scrollPos, nextZoom);\n  };\n\n  __proto.draw = function (scrollPos, nextZoom) {\n    if (scrollPos === void 0) {\n      scrollPos = this.state.scrollPos;\n    }\n\n    if (nextZoom === void 0) {\n      nextZoom = this._zoom;\n    }\n\n    this._zoom = nextZoom;\n    var props = this.props;\n    var _a = props,\n        unit = _a.unit,\n        type = _a.type,\n        backgroundColor = _a.backgroundColor,\n        lineColor = _a.lineColor,\n        textColor = _a.textColor,\n        textBackgroundColor = _a.textBackgroundColor,\n        direction = _a.direction,\n        _b = _a.negativeRuler,\n        negativeRuler = _b === void 0 ? true : _b,\n        _c = _a.segment,\n        segment = _c === void 0 ? 10 : _c,\n        textFormat = _a.textFormat,\n        _d = _a.range,\n        range = _d === void 0 ? [-Infinity, Infinity] : _d,\n        rangeBackgroundColor = _a.rangeBackgroundColor,\n        _e = _a.lineWidth,\n        lineWidth = _e === void 0 ? 1 : _e;\n    var width = this.width;\n    var height = this.height;\n    var state = this.state;\n    state.scrollPos = scrollPos;\n    var context = this.canvasContext;\n    var isHorizontal = type === \"horizontal\";\n    var isNegative = negativeRuler !== false;\n    var font = props.font || \"10px sans-serif\";\n    var textAlign = props.textAlign || \"left\";\n    var textOffset = props.textOffset || [0, 0];\n    var containerSize = isHorizontal ? height : width;\n    var mainLineSize = convertUnitSize(\"\".concat(props.mainLineSize || \"100%\"), containerSize);\n    var longLineSize = convertUnitSize(\"\".concat(props.longLineSize || 10), containerSize);\n    var shortLineSize = convertUnitSize(\"\".concat(props.shortLineSize || 7), containerSize);\n    var lineOffset = props.lineOffset || [0, 0];\n\n    if (backgroundColor === \"transparent\") {\n      // Clear existing paths & text\n      context.clearRect(0, 0, width * 2, height * 2);\n    } else {\n      // Draw the background\n      context.rect(0, 0, width * 2, height * 2);\n      context.fillStyle = backgroundColor;\n      context.fill();\n    }\n\n    context.save();\n    context.scale(2, 2);\n    context.strokeStyle = lineColor;\n    context.lineWidth = lineWidth;\n    context.font = font;\n    context.fillStyle = textColor;\n\n    switch (direction) {\n      case \"start\":\n        context.textBaseline = \"top\";\n        break;\n\n      case \"center\":\n        context.textBaseline = \"middle\";\n        break;\n\n      case \"end\":\n        context.textBaseline = \"bottom\";\n        break;\n    }\n\n    context.translate(0.5, 0);\n    context.beginPath();\n    var size = isHorizontal ? width : height;\n    var zoomUnit = nextZoom * unit;\n    var minRange = Math.floor(scrollPos * nextZoom / zoomUnit);\n    var maxRange = Math.ceil((scrollPos * nextZoom + size) / zoomUnit);\n    var length = maxRange - minRange;\n    var alignOffset = Math.max([\"left\", \"center\", \"right\"].indexOf(textAlign) - 1, -1);\n    var barSize = isHorizontal ? height : width; // Draw Range Background\n\n    if (rangeBackgroundColor !== \"transparent\" && range[0] !== -Infinity && range[1] !== Infinity) {\n      var rangeStart = (range[0] - scrollPos) * nextZoom;\n      var rangeEnd = (range[1] - range[0]) * nextZoom;\n      context.save();\n      context.fillStyle = rangeBackgroundColor;\n\n      if (isHorizontal) {\n        context.fillRect(rangeStart, 0, rangeEnd, barSize);\n      } else {\n        context.fillRect(0, rangeStart, barSize, rangeEnd);\n      }\n\n      context.restore();\n    } // Render Segments First\n\n\n    for (var i = 0; i <= length; ++i) {\n      var value = i + minRange;\n\n      if (!isNegative && value < 0) {\n        continue;\n      }\n\n      var startValue = value * unit;\n      var startPos = (startValue - scrollPos) * nextZoom;\n\n      for (var j = 0; j < segment; ++j) {\n        var pos = startPos + j / segment * zoomUnit;\n        var value_1 = startValue + j / segment * unit;\n\n        if (pos < 0 || pos >= size || value_1 < range[0] || value_1 > range[1]) {\n          continue;\n        }\n\n        var lineSize = j === 0 ? mainLineSize : j % 2 === 0 ? longLineSize : shortLineSize;\n        var origin = 0;\n\n        switch (direction) {\n          case \"start\":\n            origin = 0;\n            break;\n\n          case \"center\":\n            origin = barSize / 2 - lineSize / 2;\n            break;\n\n          case \"end\":\n            origin = barSize - lineSize;\n            break;\n        }\n\n        var _f = isHorizontal ? [pos + lineOffset[0], origin + lineOffset[1]] : [origin + lineOffset[0], pos + lineOffset[1]],\n            x1 = _f[0],\n            y1 = _f[1];\n\n        var _g = isHorizontal ? [x1, y1 + lineSize] : [x1 + lineSize, y1],\n            x2 = _g[0],\n            y2 = _g[1];\n\n        context.moveTo(x1 + lineOffset[0], y1 + lineOffset[1]);\n        context.lineTo(x2 + lineOffset[0], y2 + lineOffset[1]);\n      }\n    }\n\n    context.stroke(); // Render Labels\n\n    for (var i = 0; i <= length; ++i) {\n      var value = i + minRange;\n\n      if (!isNegative && value < 0) {\n        continue;\n      }\n\n      var startValue = value * unit;\n      var startPos = (startValue - scrollPos) * nextZoom;\n\n      if (startPos < -zoomUnit || startPos >= size + unit * nextZoom || startValue < range[0] || startValue > range[1]) {\n        continue;\n      }\n\n      var origin = 0;\n\n      switch (direction) {\n        case \"start\":\n          origin = 17;\n          break;\n\n        case \"center\":\n          origin = barSize / 2;\n          break;\n\n        case \"end\":\n          origin = barSize - 17;\n          break;\n      }\n\n      var _h = isHorizontal ? [startPos + alignOffset * -3, origin] : [origin, startPos + alignOffset * 3],\n          startX = _h[0],\n          startY = _h[1];\n\n      var text = \"\".concat(startValue);\n\n      if (textFormat) {\n        text = textFormat(startValue);\n      }\n\n      context.textAlign = textAlign;\n      var backgroundOffset = 0;\n      var textSize = context.measureText(text).width;\n\n      switch (textAlign) {\n        case \"left\":\n          backgroundOffset = 0;\n          break;\n\n        case \"center\":\n          backgroundOffset = -textSize / 2;\n          break;\n\n        case \"right\":\n          backgroundOffset = -textSize;\n          break;\n      }\n\n      if (isHorizontal) {\n        context.save();\n        context.fillStyle = textBackgroundColor;\n        context.fillRect(startX + textOffset[0] + backgroundOffset, 0, textSize, mainLineSize);\n        context.restore();\n      } else {\n        context.save();\n        context.translate(0, startY + textOffset[1]);\n        context.rotate(-Math.PI / 2);\n        context.fillStyle = textBackgroundColor;\n        context.fillRect(backgroundOffset, 0, textSize, mainLineSize);\n        context.restore();\n      }\n\n      if (isHorizontal) {\n        context.fillText(text, startX + textOffset[0], startY + textOffset[1]);\n      } else {\n        context.save();\n        context.translate(startX + textOffset[0], startY + textOffset[1]);\n        context.rotate(-Math.PI / 2);\n        context.fillText(text, 0, 0);\n        context.restore();\n      }\n    }\n\n    context.restore();\n  };\n\n  Ruler.defaultProps = {\n    type: \"horizontal\",\n    zoom: 1,\n    width: 0,\n    height: 0,\n    unit: 50,\n    negativeRuler: true,\n    mainLineSize: \"100%\",\n    longLineSize: 10,\n    shortLineSize: 7,\n    segment: 10,\n    direction: \"end\",\n    style: {\n      width: \"100%\",\n      height: \"100%\"\n    },\n    backgroundColor: \"#333333\",\n    font: \"10px sans-serif\",\n    textColor: \"#ffffff\",\n    textBackgroundColor: 'transparent',\n    lineColor: \"#777777\",\n    range: [-Infinity, Infinity],\n    rangeBackgroundColor: 'transparent',\n    lineWidth: 1\n  };\n  return Ruler;\n}(PureComponent);\n\nvar PROPERTIES = [\"type\", \"width\", \"height\", \"unit\", \"zoom\", \"direction\", \"textAlign\", \"font\", \"segment\", \"mainLineSize\", \"longLineSize\", \"shortLineSize\", \"lineOffset\", \"textOffset\", \"negativeRuler\", \"range\", \"scrollPos\", \"style\", \"backgroundColor\", \"rangeBackgroundColor\", \"lineColor\", \"textColor\", \"textBackgroundColor\", \"textFormat\", \"portalContainer\"];\nvar METHODS = [\"scroll\", \"resize\"];\n\nexport default Ruler;\nexport { METHODS, PROPERTIES };\n//# sourceMappingURL=ruler.esm.js.map\n","import { RulerProps, RulerInterface } from \"@scena/react-ruler/declaration/types\";\nimport {\n    PROPERTIES as RULER_PROPERTIES,\n    METHODS as RULER_METHODS,\n} from \"@scena/react-ruler\";\n\nexport const PROPERTIES: Array<keyof RulerProps> = RULER_PROPERTIES;\nexport const METHODS: Array<keyof RulerInterface> = RULER_METHODS;\n","import * as React from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { ref } from \"framework-utils\";\nimport ReactRuler from \"@scena/react-ruler\";\nimport { InnerRulerProps } from \"./types\";\n\nexport default class InnerRuler extends React.Component<InnerRulerProps, InnerRulerProps> {\n    public state: InnerRulerProps = {};\n    public ruler: ReactRuler;\n    constructor(props: InnerRulerProps) {\n        super(props);\n        this.state = this.props;\n    }\n    public render() {\n        const { parentElement, ...state } = this.state;\n\n        return createPortal(<ReactRuler ref={ref(this, \"ruler\")} {...state} />, parentElement);\n    }\n}\n","import { ref, Properties } from \"framework-utils\";\nimport * as React from \"react\";\nimport { render } from \"react-dom\";\nimport { PROPERTIES } from \"./consts\";\nimport { RulerInterface, RulerProps } from \"@scena/react-ruler/declaration/types\";\nimport InnerRuler from \"./InnerRuler\";\n\n\n/**\n * A Ruler component that can draw grids and scroll infinitely.\n * @sort 1\n * @implements Ruler.RulerInterface\n */\n@Properties(PROPERTIES, (prototype, property) => {\n    Object.defineProperty(prototype, property, {\n        get() {\n            return this.getRuler().props[property];\n        },\n        set(value) {\n            this.innerRuler.setState({\n                [property]: value,\n            });\n        },\n        enumerable: true,\n        configurable: true,\n    });\n})\nclass Ruler implements RulerInterface {\n    private tempElement = document.createElement(\"div\");\n    private innerRuler!: InnerRuler;\n    /**\n     * @param - container\n     * @param {$ts:Partial<Ruler.RulerProps>} options - options\n     */\n    constructor(parentElement: HTMLElement, options: Partial<RulerProps> = {}) {\n        render(\n            <InnerRuler ref={ref(this, \"innerRuler\")}\n                {...options} parentElement={parentElement} />,\n            this.tempElement,\n        );\n    }\n    public scroll(scrollPos: number) {\n        this.getRuler().scroll(scrollPos);\n    }\n    public resize() {\n        this.getRuler().resize();\n    }\n    /**\n     * Remove Ruler\n     */\n    public destroy() {\n        render(null, this.tempElement);\n        this.tempElement = null;\n        this.innerRuler = null;\n    }\n    private getRuler() {\n        return this.innerRuler.ruler;\n    }\n}\n\nexport default Ruler;\n","import Ruler, * as others from \"./index.esm\";\n\nfor (const name in others) {\n    (Ruler as any)[name] = others[name];\n}\n\nexport default Ruler;\n"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","Ruler","_super","_this","state","scrollPos","width","height","_zoom","__proto","render","props","portalContainer","portalAttributes","version","indexOf","zoom","createElement","ref","style","componentDidMount","canvas","canvasElement","context","getContext","canvasContext","resize","componentDidUpdate","scroll","nextZoom","draw","_a","offsetWidth","offsetHeight","unit","type","backgroundColor","lineColor","textColor","textBackgroundColor","direction","_b","negativeRuler","_c","segment","textFormat","_d","range","Infinity","rangeBackgroundColor","_e","lineWidth","isHorizontal","isNegative","font","textAlign","textOffset","containerSize","mainLineSize","convertUnitSize","concat","longLineSize","shortLineSize","lineOffset","clearRect","rect","fillStyle","fill","save","scale","strokeStyle","textBaseline","translate","beginPath","size","zoomUnit","minRange","Math","floor","maxRange","ceil","alignOffset","max","barSize","rangeStart","rangeEnd","fillRect","restore","value","startValue","startPos","j","pos","value_1","lineSize","origin","_f","x1","y1","_g","x2","y2","moveTo","lineTo","stroke","_h","startX","startY","text","backgroundOffset","textSize","measureText","rotate","PI","fillText","defaultProps","PureComponent","PROPERTIES","METHODS","RULER_PROPERTIES","RULER_METHODS","parentElement","createPortal","React","ReactRuler","options","document","InnerRuler","tempElement","getRuler","innerRuler","ruler","Properties","property","defineProperty","get","set","setState","enumerable","configurable","name","others"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}