/*
Copyright (c) Daybrush
name: @scena/ruler
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/ruler.git
version: 0.17.0
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Ruler=e()}(this,function(){"use strict";var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var c=function(){return(c=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function s(e,n){return function(t){t&&(e[n]=t)}}var A="function",M="object",B="string",L="undefined",u={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,e){return t*e/100},vw:function(t,e){return t/100*(e=void 0===e?window.innerWidth:e)},vh:function(t,e){return t/100*(e=void 0===e?window.innerHeight:e)},vmax:function(t,e){return t/100*(e=void 0===e?Math.max(window.innerWidth,window.innerHeight):e)},vmin:function(t,e){return t/100*(e=void 0===e?Math.min(window.innerWidth,window.innerHeight):e)}};function v(t){return typeof t===B}function C(t,r){return void 0===r&&(r="-"),t.replace(/([a-z])([A-Z])/g,function(t,e,n){return""+e+r+n.toLowerCase()})}function X(t,e,n){void 0===n&&(n=-1);for(var r=t.length,o=0;o<r;++o)if(e(t[o],o,t))return o;return n}function h(t){return Object.keys(t)}function Y(t,e){var n=(t=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t=t))?(n=t[1],r=t[2],{prefix:n,unit:t[3],value:parseFloat(r)}):{prefix:"",unit:"",value:NaN},t=n.value,r=n.unit;if((o=e)&&typeof o===M){var o=e[r];if(o){if(typeof o===A)return o(t);if(u[r])return u[r](t,o)}}else if("%"===r)return t*e/100;return u[r]?u[r](t):t}function a(t,e,n,r){t.removeEventListener(e,n,r)}var N=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,e){var n=this.keys,r=this.values,o=n.indexOf(t),o=-1===o?n.length:o;n[o]=t,r[o]=e},t}(),U=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,e){this.object[t]=e},t}(),W="function"==typeof Map,D=function(){function t(){}var e=t.prototype;return e.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},e.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},e.getIndex=function(){for(var t=this,e=-1;t;)t=t.prev,++e;return e},t}();var I=function(){function t(t,e,n,r,o,i,c,s){this.prevList=t,this.list=e,this.added=n,this.removed=r,this.changed=o,this.maintained=i,this.changedBeforeAdded=c,this.fixed=s}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){t=this.changedBeforeAdded,n=this.fixed,o=[],i=[],t.forEach(function(t){var e=t[0],t=t[1],n=new D;i[t]=o[e]=n}),o.forEach(function(t,e){t.connect(o[e-1])});var n,o,i,t=t.filter(function(t,e){return!n[e]}).map(function(t,e){var n,r=t[0],t=t[1];return r===t?[0,0]:(t=i[t-1],n=(r=o[r]).getIndex(),r.disconnect(),t?r.connect(t,t.next):r.connect(void 0,o[0]),[n,r.getIndex()])}),c=this.changed,s=[];this.cacheOrdered=t.filter(function(t,e){var n=t[0],t=t[1],e=c[e],r=e[0],e=e[1];if(n!==t)return s.push([r,e]),!0}),this.cachePureChanged=s},t}();function y(t,e,n){var r=W?Map:n?U:N,n=n||function(t){return t},o=[],i=[],c=[],s=t.map(n),n=e.map(n),u=new r,a=new r,l=[],f=[],h={},p=[],d=0,v=0;return s.forEach(function(t,e){u.set(t,e)}),n.forEach(function(t,e){a.set(t,e)}),s.forEach(function(t,e){t=a.get(t);void 0===t?(++v,i.push(e)):h[t]=v}),n.forEach(function(t,e){t=u.get(t);void 0===t?(o.push(e),++d):(c.push([t,e]),v=h[e]||0,l.push([t-v,e-d]),f.push(e===t),t!==e&&p.push([t,e]))}),i.reverse(),new I(t,e,o,i,p,c,l,f)}var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var g=function(){return(g=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function l(t,e){var n={};for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n}function _(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||((r=r||Array.prototype.slice.call(e,0,o))[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}function m(t){var e=0;return t.map(function(t){return null==t?"$compat".concat(++e):"".concat(t)})}function p(t){var e=[];return t.forEach(function(t){e=e.concat(Array.isArray(t)?p(t):t)}),e}function b(t,e){if(e)for(var n in e)typeof t[n]===L&&(t[n]=e[n]);return t}function f(t,e){if(t!==e){for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0}return!1}function E(t){var e=t.className,t=l(t,["className"]);return null!=e&&(t.class=e),delete t.style,delete t.children,t}function R(t){var e,n={},r={};for(e in t)0===e.indexOf("on")?r[e]=t[e]:n[e]=t[e];return[n,r]}function k(t){var e;return t?(e=t.b)instanceof Node?e:k(t.c):null}function d(t){var e=t.parentNode;e&&e.removeChild(t)}function w(t){t.forEach(function(t){t()})}function H(){return this.constructor(this.props,this.context)}var t=function(){function t(t,e,n,r,o,i,c){void 0===c&&(c={}),this.t=t,this.d=e,this.k=n,this.i=r,this.c=o,this.ref=i,this.ps=c,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var e=t.prototype;return e.s=function(){return!0},e.u=function(e,n,t,r,o){var i,c,s=this,u=s.d,a=p(h(i=n).map(function(t){return i[t]}).filter(function(t){return t.$_req}).map(function(t){return t.$_subs})),l=-1<(f=X(l=a,f=function(t){return t.d===u}))?l[f]:c;if(s.b&&!v(t)&&!o&&!s.s(t.props,r)&&!l)return a.reduce(function(t,e){var n=e.d;return t[0]?t[0].d===n&&t.push(e):u<n&&t.push(e),t},[]).forEach(function(t){$(t,t._ps,[t.o],e,n,!0)}),!1;s.o=t,s.ss(r);var f=s.ps;return v(t)||(s.ps=t.props,s.ref=t.ref),s.r(e,n,s.b?f:{},r),!0},e.md=function(){this.rr()},e.ss=function(){},e.ud=function(){this.rr()},e.rr=function(){var t=this.ref,e=this.fr;t&&t(e?e.current:this.b)},t}(),x=function(){function t(t,e){this.props=t=void 0===t?{}:t,this.context=e,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var e=t.prototype;return e.render=function(){return null},e.shouldComponentUpdate=function(t,e){return this.props!==t||this.state!==e},e.setState=function(t,e,n){var r=this;r.$_timer||(r.$_state={}),clearTimeout(r.$_timer),r.$_timer=0,r.$_state=g(g({},r.$_state),t),n?r.$_setState(e,n):r.$_timer=window.setTimeout(function(){r.$_timer=0,r.$_setState(e,n)})},e.forceUpdate=function(t){this.setState({},t,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(t,e){},e.componentWillUnmount=function(){},e.$_setState=function(t,e){var n=[],r=this.$_p;$(r.c,[r],[r.o],n,r._cs,g(g({},this.state),this.$_state),e)&&(t&&n.push(t),w(n))},t}(),F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.shouldComponentUpdate=function(t,e){return f(this.props,t)||f(this.state,e)},e}(x);function q(t){function e(t){e.current=t}return e.current=t,e}var G=function(s){function t(t,e,n,r,o,i,c){e=s.call(this,t,e,n,r,o,i,b(c=void 0===c?{}:c,t.defaultProps))||this;return e.typ="comp",e._usefs=[],e._uefs=[],e._defs=[],e}o(t,s);var e=t.prototype;return e.s=function(t,e){var n=this.b;return!1!==n.shouldComponentUpdate(b(t,this.t.defaultProps),e||n.state)},e.r=function(t,e,n){var r,o,i,c,s=this,u=s.t,a=(s.ps=b(s.ps,s.t.defaultProps),s.ps),l=!s.b,f=u.contextType,h=s.b,p=null==f?void 0:f.get(s),d=(s._cs=e,l?(r=a,o=p,i=s,null!=(v=null==(u=u)?void 0:u.prototype)&&v.render?c=new u(r,o):((c=new x(r,o)).constructor=u)._fr?(i.fr=q(),c.render=function(){return this.constructor(this.props,i.fr)}):c.render=H,c.$_p=i,h=c,s.b=h):(h.props=a,h.context=p),h.state),v=(s._usefs=[],s._uefs=[],h.render()),u=(0===(null==(o=null==(r=null==v?void 0:v.props)?void 0:r.children)?void 0:o.length)&&(v.props.children=s.ps.children),g(g({},e),h.$_cs));$(s,s._ps,v?[v]:[],t,u),l?s._uefs.push(function(){null!=f&&f.register(s),h.componentDidMount()}):s._uefs.push(function(){h.componentDidUpdate(n,d)}),t.push(function(){s._usefs.forEach(function(t){t()}),l?s.md():s.ud(),s._defs=s._uefs.map(function(t){return t()})})},e.ss=function(t){var e=this.b;e&&t&&(e.state=t)},e.un=function(){var t,e=this;e._ps.forEach(function(t){t.un()}),null!=(t=e.t.contextType)&&t.unregister(e),clearTimeout(e.b.$_timer),e._defs.forEach(function(t){t&&t()}),e.b.componentWillUnmount()},t}(t);function z(n,r){var o=h(n),e=h(r),t=y(o,e,function(t){return t}),i={},c={},s={};return t.added.forEach(function(t){t=e[t];i[t]=r[t]}),t.removed.forEach(function(t){t=o[t];c[t]=n[t]}),t.maintained.forEach(function(t){var t=t[0],t=o[t],e=[n[t],r[t]];n[t]!==r[t]&&(s[t]=e)}),{added:i,removed:c,changed:s}}var V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.typ="elem",t._es={},t._svg=!1,t}o(t,e);var n=t.prototype;return n.e=function(r,t){var e,o=this,n=o._es,i=o.b,c=r.replace(/^on/g,"").toLowerCase();t?(a(i,c,n[r]),delete n[r]):(n[r]=function(t){var e,n;null!=(n=(e=o.ps)[r])&&n.call(e,t)},t=n[r],i.addEventListener(c,t,e))},n.s=function(t){return f(this.ps,t)},n.r=function(t,e,n){var r,o,i,c=this,s=!c.b,u=c.ps,a=(s&&(a=!1,a=!(!c._svg&&"svg"!==c.t)||(f=k(c.c))&&f.ownerSVGElement,c._svg=a,(f=u.portalContainer)||(f=null==(l=c._hyd)?void 0:l.splice(0,1)[0],l=c.t,f?c._hyd=[].slice.call(f.children):f=a?document.createElementNS("http://www.w3.org/2000/svg",l):document.createElement(l)),c.b=f),$(c,c._ps,u.children,t,e),c.b),l=R(n),f=l[0],e=l[1],l=R(u),h=l[0],l=l[1],p=a,d=(f=z(E(f),E(h))).added,h=f.removed,v=f.changed;for(r in d)p.setAttribute(r,d[r]);for(o in v)p.setAttribute(o,v[o][1]);for(i in h)p.removeAttribute(i);var y,g,h=e,_=c,e=(h=z(e,e=l)).added;for(y in h.removed)_.e(y,!0);for(g in e)_.e(g);var m,h=n.style||{},e=u.style||{},n=a,b=n.style,w=(n=z(h,e)).added,h=n.removed,x=n.changed;for(m in w){var O=C(m,"-");b.setProperty(O,w[m])}for(m in x){var S=C(m,"-");b.setProperty(S,x[m][1])}for(m in h){var P=C(m,"-");b.removeProperty(P)}return t.push(function(){s?c.md():c.ud()}),!0},n.un=function(){var t,e=this,n=e._es,r=e.b;for(t in n)a(r,t,n[t]);e._ps.forEach(function(t){t.un()}),e._es={},e.ps.portalContainer||e._sel||(console.log(r),d(r))},t}(t);function O(t){return!t||t instanceof Node?t:(t=t.$_p._ps).length?O(t[0].b):null}function S(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var e=e||{},o=e.key,i=e.ref,e=l(e,["key","ref"]);return{type:t,key:o,ref:i,props:g(g({},e),{children:n.reduce(function(t,e){return t.concat(e)},[]).filter(function(t){return null!=t&&!1!==t})})}}var P=function(n){function t(t,e){e=n.call(this,"container",e=void 0===e?0:e,"container",0,null)||this;return e.typ="container",e.b=t,e}o(t,n);var e=t.prototype;return e.r=function(){return!0},e.un=function(){},t}(t),Z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.typ="text",t}o(t,e);var n=t.prototype;return n.r=function(t){var e,n=this,r=!n.b;return r&&(e=null==(e=n._hyd)?void 0:e.splice(0,1)[0],n.b=e||document.createTextNode(n.t.replace("text_",""))),t.push(function(){r?n.md():n.ud()}),!0},n.un=function(){d(this.b)},t}(t);function j(t,e,n,r){var o,i=r.d+1;return v(t)||"number"==typeof t?new Z("text_".concat(t),i,e,n,r,null,{}):new("string"==typeof(o=t.type)?V:G)(o,i,e,n,r,t.ref,t.props)}function $(n,r,o,i,c,s,u){a=n,l=r,h=(f=o).map(function(t){return v(t)?null:t.key}),(t=y(m(l.map(function(t){return t.k})),m(h),function(t){return t})).removed.forEach(function(t){l.splice(t,1)[0].un()}),t.ordered.forEach(function(t){var e=t[0],t=t[1],e=l.splice(e,1)[0],e=(l.splice(t,0,e),O(e.b)),t=O(l[t+1]&&l[t+1].b);e&&e.parentNode.insertBefore(e,t)}),t.added.forEach(function(t){l.splice(t,0,j(f[t],h[t],t,a))}),e=t.maintained.filter(function(t){t[0];var t=t[1],e=f[t],n=l[t];return(v(e)?"text_".concat(e):e.type)!==n.t?(n.un(),l.splice(t,1,j(e,h[t],t,a)),!0):(n.i=t,!1)});var a,l,f,h,t=_(_([],t.added,!0),e.map(function(t){return t[0],t[1]}),!0),p=n._hyd,e=r.filter(function(t,e){return t._hyd=p,t.u(i,c,o[e],s,u)}),d=("container"===n.typ&&n._sel&&r.forEach(function(t){t=function t(e){if(e)return e.b&&e.b instanceof Node?e:(e=e._ps).length?t(e[0]):null}(t);t&&(t._sel=!0)}),n._hyd=null,k(n));return d&&t.reverse().forEach(function(t){var t=r[t],e=O(t.b);e&&d!==e&&!e.parentNode&&(t=function(t,e){for(var n=t._ps,r=n.length,o=e.i+1;o<r;++o){var i=O(n[o].b);if(i)return i}return null}(n,t),d.insertBefore(e,t))}),0<e.length}function T(t,e,n){var r,o,i;!n&&t&&((n=new P(e.parentElement))._hyd=[e],n._sel=!0),t=t,e=e,void 0===r&&(r={}),o=!!(n=void 0===(n=n)?e.__CROACT__:n),i=[],$(n=n||new P(e),n._ps,t?[t]:[],i,r,void 0,void 0),w(i),o||(e.__CROACT__=n)}var J=function(t,e){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var e,K=function(e){var t=o,n=e;if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={scrollPos:0},t.width=0,t.height=0,t._zoom=0,t._rulerScale=0,t._observer=null,t._checkResize=function(){t.resize()},t}J(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r);n=o.prototype;return n.render=function(){var t=this.props;return this._zoom=t.zoom,S("canvas",{ref:s(this,"canvasElement"),style:this.props.style})},n.componentDidMount=function(){var t=this.canvasElement,e=t.getContext("2d",{alpha:!1});this.canvasContext=e,this.props.useResizeObserver?(this._observer=new ResizeObserver(this._checkResize),this._observer.observe(t,{box:"border-box"})):this.resize()},n.componentDidUpdate=function(){this.resize()},n.componentWillUnmount=function(){var t;this.state.scrollPos=0,null!=(t=this._observer)&&t.disconnect()},n.getScrollPos=function(){return this.state.scrollPos},n.scroll=function(t,e){this.draw(t,e)},n.resize=function(t){var e=this.canvasElement,n=this.props,r=n.width,o=n.height,n=n.scrollPos,i=this._getRulerScale();this.width=r||e.offsetWidth,this.height=o||e.offsetHeight,e.width=this.width*i,e.height=this.height*i,this.draw(n,t)},n.draw=function(l,f){void 0===l&&(l=this.state.scrollPos),void 0===f&&(f=this._zoom),this._zoom=f;var t=this.props,h=t.unit,e=t.type,n=t.backgroundColor,B=t.lineColor,r=t.textColor,L=t.textBackgroundColor,p=t.direction,o=t.negativeRuler,i=void 0===o||o,o=t.segment,c=void 0===o?10:o,d=t.textFormat,o=t.range,v=void 0===o?[-1/0,1/0]:o,o=t.rangeBackgroundColor,s=t.selectedRanges,N=t.selectedBackgroundColor,u=t.lineWidth,u=void 0===u?1:u,U=t.selectedRangesText,a=t.selectedRangesTextColor,W=void 0===a?"#44aaff":a,a=t.selectedRangesTextOffset,D=void 0===a?[0,0]:a,a=this._getRulerScale(),y=this.width,g=this.height,_=(this.state.scrollPos=l,this.canvasContext),m="horizontal"===e,I=!1!==i,e=t.font||"10px sans-serif",b=t.textAlign||"left",H=t.textOffset||[0,0],w=m?g:y,x=Y("".concat(t.mainLineSize||"100%"),w),F=Y("".concat(t.longLineSize||10),w),q=Y("".concat(t.shortLineSize||7),w),O=t.lineOffset||[0,0];switch("transparent"===n?_.clearRect(0,0,y*a,g*a):(_.rect(0,0,y*a,g*a),_.fillStyle=n,_.fill()),_.save(),_.scale(a,a),_.strokeStyle=B,_.lineWidth=u,_.font=e,_.fillStyle=r,p){case"start":_.textBaseline="top";break;case"center":_.textBaseline="middle";break;case"end":_.textBaseline="bottom"}_.translate(.5,0),_.beginPath();for(var S=m?y:g,P=f*h,C=Math.floor(l*f/P),G=Math.ceil((l*f+S)/P)-C,V=Math.max(["left","center","right"].indexOf(b)-1,-1),E=m?g:y,R=[],k=0;k<=G;++k)R.push({color:r,offset:H,backgroundColor:L,value:(k+C)*h});"transparent"!==N&&null!=s&&s.length&&s.forEach(function(t){var e=Math.max(t[0],v[0],i?-1/0:0),n=Math.min(t[1],v[1]),r=(e-l)*f,n=(n-e)*f;U&&t.forEach(function(e){var t=X(R,function(t){return t.value===e});-1<t&&R.splice(t,1),R.push({value:e,color:W,offset:D})}),n<=0||(_.save(),_.fillStyle=N,m?_.fillRect(r,0,n,E):_.fillRect(0,r,E,n),_.restore())}),"transparent"!==o&&v[0]!==-1/0&&v[1]!==1/0&&(w=(v[0]-l)*f,t=(v[1]-v[0])*f,_.save(),_.fillStyle=o,m?_.fillRect(w,0,t,E):_.fillRect(0,w,E,t),_.restore());for(k=0;k<=G;++k){var Z=k+C;if(I||!(Z<0))for(var J=Z*h,K=(J-l)*f,z=0;z<c;++z){var j=K+z/c*P,$=J+z/c*h;if(!(j<0||S<=j||$<v[0]||$>v[1])){var T=0===z?x:z%2==0?F:q,A=0;switch(p){case"start":A=0;break;case"center":A=E/2-T/2;break;case"end":A=E-T}var $=m?[j+O[0],A+O[1]]:[A+O[0],j+O[1]],j=$[0],$=$[1],M=m?[j,$+T]:[j+T,$],Q=M[0],M=M[1];_.moveTo(j+O[0],$+O[1]),_.lineTo(Q+O[0],M+O[1])}}}_.stroke(),R.forEach(function(t){var e=t.value,n=t.offset,r=t.backgroundColor,t=t.color;if(I||!(e<0)){var o=(e-l)*f;if(!(o<-P||S+h*f<=o||e<v[0]||e>v[1])){var i=0;switch(p){case"start":i=17;break;case"center":i=E/2;break;case"end":i=E-17}var o=m?[o+-3*V,i]:[i,o+3*V],c=o[0],o=o[1],s="".concat(e);if(d&&(s=d(e)),_.textAlign=b,r){var u=0,a=_.measureText(s).width;switch(b){case"left":u=0;break;case"center":u=-a/2;break;case"right":u=-a}_.save(),_.fillStyle=r,m?_.fillRect(c+n[0]+u,0,a,x):(_.translate(0,o+n[1]),_.rotate(-Math.PI/2),_.fillRect(u,0,a,x)),_.restore()}_.save(),_.fillStyle=t,m?_.fillText(s,c+n[0],o+n[1]):(_.translate(c+n[0],o+n[1]),_.rotate(-Math.PI/2),_.fillText(s,0,0)),_.restore()}}}),_.restore()},n._getRulerScale=function(){var t,e,n=this.props.defaultPixelScale||2;return this._rulerScale||(!(e=1<window.devicePixelRatio)&&window.matchMedia&&(e=(t=window.matchMedia("only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen  and (min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx)"))&&t.matches),this._rulerScale=e?3:n),this._rulerScale},o.defaultProps={type:"horizontal",zoom:1,width:0,height:0,unit:50,negativeRuler:!0,mainLineSize:"100%",longLineSize:10,shortLineSize:7,segment:10,direction:"end",style:{width:"100%",height:"100%"},backgroundColor:"#333333",font:"10px sans-serif",textColor:"#ffffff",textBackgroundColor:"transparent",lineColor:"#777777",range:[-1/0,1/0],rangeBackgroundColor:"transparent",lineWidth:1,selectedBackgroundColor:"#555555"},o}(F),Q=["type","width","height","unit","zoom","direction","textAlign","font","segment","mainLineSize","longLineSize","shortLineSize","lineOffset","textOffset","negativeRuler","range","scrollPos","style","backgroundColor","rangeBackgroundColor","lineColor","textColor","textBackgroundColor","textFormat","warpSelf","selectedBackgroundColor","selectedRanges","defaultPixelScale","useResizeObserver","selectedRangesText","selectedRangesTextColor","selectedRangesTextOffset"],t=["scroll","resize","getScrollPos"],tt=function(e){var t=o,n=e;if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}function o(t){t=e.call(this,t)||this;return t.state={},t.state=t.props,t}return i(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r),o.prototype.render=function(){return S(K,c({ref:s(this,"ruler")},this.state))},o}(x),n=function(){function t(t,e){var n;void 0===e&&(e={}),this.containerProvider=null,this.selfElement=null,this._warp=!1,e.warpSelf?(delete e.warpSelf,this._warp=!0,n=t):(n=document.createElement("div"),t.appendChild(n)),T(S(tt,c({ref:s(this,"innerRuler")},e)),n)}var n,r,e=t.prototype;return e.scroll=function(t){this.getRuler().scroll(t)},e.resize=function(){this.getRuler().resize()},e.getScrollPos=function(){return this.getRuler().getScrollPos()},e.destroy=function(){var t,e=this.selfElement;T(null,e,this.containerProvider),this._warp||null!=(t=null==e?void 0:e.parentElement)&&t.removeChild(e),this.selfElement=null,this.innerRuler=null},e.getRuler=function(){return this.innerRuler.ruler},function(t,e,n,r){var o,i=arguments.length,c=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;0<=s;s--)(o=t[s])&&(c=(i<3?o(c):3<i?o(e,n,c):o(e,n))||c);return 3<i&&c&&Object.defineProperty(e,n,c),c}([(n=Q,r=function(t,n){Object.defineProperty(t,n,{get:function(){return this.getRuler().props[n]},set:function(t){var e;this.innerRuler.setState(((e={})[n]=t,e))},enumerable:!0,configurable:!0})},function(t){var e=t.prototype;n.forEach(function(t){r(e,t)})})],t)}(),et={__proto__:null,default:n,PROPERTIES:Q,METHODS:t};for(e in et)n[e]=et[e];return n});
//# sourceMappingURL=ruler.min.js.map
