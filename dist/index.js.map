{"version":3,"file":"index.js","sources":["../../src/consts.ts","../../src/InnerRuler.tsx","../../src/Ruler.tsx","../src/index.ts"],"sourcesContent":["import { RulerProps } from \"@scena/react-ruler/declaration/types\";\n\nexport const PROPERTIES: Array<keyof RulerProps> = [\n    \"type\", \"width\", \"height\",\n    \"unit\", \"zoom\", \"style\", \"backgroundColor\", \"lineColor\",\n    \"textColor\",\n];\n","import * as React from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { ref } from \"framework-utils\";\nimport ReactRuler from \"@scena/react-ruler\";\nimport { InnerRulerProps } from \"./types\";\n\nexport default class InnerRuler extends React.Component<InnerRulerProps, InnerRulerProps> {\n    public state: InnerRulerProps = {};\n    public ruler: ReactRuler;\n    constructor(props: InnerRulerProps) {\n        super(props);\n        this.state = this.props;\n    }\n    public render() {\n        const { parentElement, ...state } = this.state;\n\n        return createPortal(<ReactRuler ref={ref(this, \"ruler\")} {...state} />, parentElement);\n    }\n}\n","import { ref, Properties } from \"framework-utils\";\nimport * as React from \"react\";\nimport { render } from \"react-dom\";\nimport { PROPERTIES } from \"./consts\";\nimport { RulerInterface, RulerProps } from \"@scena/react-ruler/declaration/types\";\nimport InnerRuler from \"./InnerRuler\";\n\n@Properties(PROPERTIES, (prototype, property) => {\n    Object.defineProperty(prototype, property, {\n        get() {\n            return this.getRuler().props[property];\n        },\n        set(value) {\n            this.innerRuler.setState({\n                [property]: value,\n            });\n        },\n        enumerable: true,\n        configurable: true,\n    });\n})\nclass Ruler implements RulerInterface {\n    private tempElement = document.createElement(\"div\");\n    private innerRuler!: InnerRuler;\n\n    constructor(parentElement: HTMLElement, options: Partial<RulerProps> = {}) {\n        render(\n            <InnerRuler ref={ref(this, \"innerRuler\")}\n                {...options} parentElement={parentElement} />,\n            this.tempElement,\n        );\n    }\n    public scroll(scrollPos: number) {\n        this.getRuler().scroll(scrollPos);\n    }\n    public resize() {\n        this.getRuler().resize();\n    }\n    public destroy() {\n        render(null, this.tempElement);\n        this.tempElement = null;\n        this.innerRuler = null;\n    }\n    private getRuler() {\n        return this.innerRuler.ruler;\n    }\n}\n\nexport default Ruler;\n","import Ruler from \"../../src/Ruler\";\nimport Dragger from \"@daybrush/drag\";\nimport \"./index.css\";\n\nconst ruler1 = new Ruler(document.querySelector(\".ruler.horizontal\"), {\n    type: \"horizontal\",\n});\nconst ruler2 = new Ruler(document.querySelector(\".ruler.vertical\"), {\n    type: \"vertical\",\n});\n\nwindow.addEventListener(\"resize\", () => {\n    ruler1.resize();\n    ruler2.resize();\n});\nlet scrollX = 0;\nlet scrollY = 0;\n\nnew Dragger(document.body, {\n    drag: e => {\n        scrollX -= e.deltaX;\n        scrollY -= e.deltaY;\n\n        ruler1.scroll(scrollX);\n        ruler2.scroll(scrollY);\n    },\n});\n"],"names":["PROPERTIES","__extends","props","_super","_this","state","_a","parentElement","createPortal","React","ReactRuler","ref","options","document","createElement","render","InnerRuler","tempElement","scrollPos","getRuler","scroll","resize","innerRuler","ruler","Ruler","Properties","prototype","property","Object","defineProperty","get","set","value","setState","enumerable","configurable","ruler1","querySelector","type","ruler2","window","addEventListener","scrollX","scrollY","Dragger","body","drag","e","deltaX","deltaY"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}